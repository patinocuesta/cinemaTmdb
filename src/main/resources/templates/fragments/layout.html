<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<div th:fragment="head">
<title>CinemaSpring</title>
<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <script src="/webjars/tinymce/4.7.9/tinymce.min.js"></script>
    <link rel="stylesheet" href="/webjars/bootstrap/3.3.7-1/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/static/css/style.css" th:href="@{/static/css/style.css}"/>
</div>
</head>
<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="50">
<div th:fragment="navbar">
    <nav class="navbar navbar-inverse navbar-fixed-top" id="mainNav" >
        <div class="container-fluid" STYLE="max-width: 1000px; margin: auto;" >
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Spring Cinema</a>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                    <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                </ul>
                <ul class="nav navbar-nav">
                    <li><a href="#">A l'affiche</a></li>
                    <li><a href="#">Evenements</a></li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Explorer
                            <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Films</a></li>
                            <li><a href="#">Acteurs</a></li>
                            <li><a href="#">Realisateurs</a></li>
                            <li><a href="#">Genres</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Nos distributeurs
                            <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a th:href="@{'tmdb/list/1'}" th:text="Importer">Importer</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">NÃ´tre cinema
                            <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">blog</a></li>
                            <li><a href="#">Nous trouver</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#">A propos de nous</a></li>
                        </ul>
                    </li>
                </ul>

            </div>
            <nav class="classnavbar navbar-inverse" id="importSearch">
                <div class="search-container">
                    <form class="example" action="/action_page.php">
                        <input type="text" placeholder="Search.." name="search">
                    </form>
                </div>
            </nav>
    </nav>

        </div>
<div th:fragment="overlay">
    <!--Overside-->
        <div id="overSide" class="overlay">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav();">&times;</a>
            <!--overlay Content-->
            <div class="overlay-content">
                <!--Container fluid-->
                    <div class="container-fluid text-center">

                        <!-- row -->
                            <div class="row content" STYLE="max-width: 1000px; margin: auto;";>
                                <div class="col-sm-6 col-md-4 col-lg-4 sidenav">
                                    <img src="https://image.tmdb.org/t/p/w500/kqjL17yufvn9OVLyXYpvtyrFfak.jpg" alt="Avatar" class="affiche_overlay">
                                    <a href="" class="importbtn" onclick="closeNav()">Importer</a>
                                    <br/>
                                </div>
                                <!-- Texto izquierda -->
                                    <div class="col-sm-6 col-md-8 col-lg-8 text-left">
                                        <div class="well">
                                            <div class="film-title" id="film-title"> title</div>
                                        </div>
                                        <!--Panel Rating-->
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    Rating
                                                </div>
                                                <div class="panel-body">
                                                    <span class="fa fa-star checked"></span>
                                                    <span class="fa fa-star checked"></span>
                                                    <span class="fa fa-star checked"></span>
                                                    <span class="fa fa-star"></span>
                                                    <span class="fa fa-star"></span>
                                                </div>
                                            </div>
                                        <!--Fin Rating-->
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                Sinopsis
                                            </div>
                                            <div class="panel-body" id="overview">
                                                "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                                            </div>
                                        </div>
                                        <!--Panel genres-->
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    Genres
                                                </div>
                                                <div class="panel-body">
                                                    temis
                                                </div>
                                        <!--Fin Panel genres-->
                                            </div>
                                        <!--Panel Equipo artistico-->
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    Equipe artistique
                                                </div>
                                                <div class="panel-body">
                                                    <!--Panel actor-->
                                                        <div class="panel panel-default">
                                                            <div class="panel-heading">
                                                                Nom acteur
                                                            </div>
                                                            <div class="panel-body">
                                                                <img src="https://image.tmdb.org/t/p/w600_and_h900_bestv2/bPqRdLWWwpOT8sBdj9PWOzNgwou.jpg" alt="Avatar" class="image_overlay">
                                                            </div>
                                                            <div class="panel-footer">
                                                                Role
                                                            </div>
                                                            <!--Fin actor-->
                                                        </div>

                                                </div>
                                                <!--Fin Equipo artistico-->
                                            </div>
                                <!--Fin texto izq-->
                                    </div>
                        <!--Fin row-->
                            </div>
                <!--Fin Container fluid-->
                    </div>
            <!--Fin overalay content-->
            </div>
<!--Fin Overside-->
        </div>
</div>
<div th:fragment="container-films">
<div class="container-fluid text-center">
<div class="row">
<div class="col-xs-6 col-sm-3 col-md-3" th:each="film: ${films.listFilmDto}">
<div class="panel panel-default">
<div class="panel-body">
<div class="container">
<div th:text="${film.id}"  id="idFilmDetail"></div>
<img th:src="@{'https://image.tmdb.org/t/p/w500/'+ ${film.poster_path}}" alt="Avatar"class="image">
<div class="middle">
<button type="button" class="btn btn-primary btn-md" onclick="openNav()">Details du film</button>
<br/><br/><br/>
<button type="button" class="btn btn-primary btn-md">Importer</button>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div th:fragment="pagination">
    <div class="row">
        <ul class="pagination pagination-lg">
            <li th:each="i : ${#numbers.sequence(1, films.total_pages)}">
                <a th:href="@{${i}}" th:text="${i}">1</a>
            </li>

        </ul>
    </div>
</div>
<div th:fragment="footer">

    <footer class="text-center">

        <a class="up-arrow" href="#myPage" data-toggle="tooltip" title="TO TOP">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </a><br><br>
        <p>Bootstrap Theme Made By <a href="#" data-toggle="tooltip" title="Visit w3schools">Spring cinema</a></p>
    </footer>
</div>
<div th:fragment="footer-js">
    <script src="/webjars/bootstrap/3.3.7-1/js/bootstrap.min.js"></script>
    <script src="/webjars/jquery/3.3.1/jquery.js"></script>
    <!-- Placed at the end of the document so the pages load faster -->

    <script type="application/javascript">
        $('.ui.dropdown.item')
            .dropdown();
    </script>
    <script>


        function openNav() {

           // var idFilmDetail = document.getElementById('idFilmDetail');
            var idFilmDetail = $(this).closest('button').prev('#idFilmDetail').text();
            alert (idFilmDetail);
            $.ajax({
                url: '/api/tmdb/list/film/' + idFilmDetail,
                type: 'get',
                dataType: 'json',
                contentType: 'application/json',
                data: 'data',
                success: function(data){
                    var filmTitle = data.title;
                    var overview = data.overview;
                    $('#film-title').html(filmTitle);
                    $('#overview').html(overview);
                }


            });
            document.getElementById("overSide").style.width = "100%";
            document.getElementById("mainNav").style.display = "none";
        }
        function closeNav() {
            document.getElementById("overSide").style.width = "0%";
            document.getElementById("mainNav").style.display = "block";

        }

    </script>
    <script>
    $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
    })
    </script>


</div>
</body>
</html>
